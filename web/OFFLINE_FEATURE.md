# ç¦»çº¿åŠŸèƒ½è¯´æ˜Ž / Offline Feature Guide

## ä¸­æ–‡è¯´æ˜Ž

### åŠŸèƒ½æ¦‚è¿°

çŽ°åœ¨æ”¯æŒå®Œæ•´çš„ç¦»çº¿åŠŸèƒ½ï¼å³ä½¿æ²¡æœ‰ç½‘ç»œè¿žæŽ¥ï¼Œæ‚¨ä¹Ÿå¯ä»¥ï¼š
- âœ… æŸ¥çœ‹æ‰€æœ‰æ•°æ®ï¼ˆè´¹ç”¨ã€åˆ†ç±»ã€é¢„ç®—ç­‰ï¼‰
- âœ… æ·»åŠ ã€ç¼–è¾‘ã€åˆ é™¤è´¹ç”¨
- âœ… ç®¡ç†åˆ†ç±»å’Œé¢„ç®—
- âœ… æ‰€æœ‰æ›´æ”¹ä¼šè‡ªåŠ¨æŽ’é˜Ÿ
- âœ… ç½‘ç»œæ¢å¤åŽè‡ªåŠ¨åŒæ­¥

### å·¥ä½œåŽŸç†

#### å½“æ‚¨æœ‰ç½‘ç»œæ—¶ï¼š
1. åº”ç”¨ä¼šè‡ªåŠ¨ä¸‹è½½æ‰€æœ‰æ•°æ®åˆ°æœ¬åœ°ç¼“å­˜
2. æ‚¨çš„æ“ä½œä¼šç«‹å³ä¿å­˜åˆ°äº‘ç«¯
3. æ•°æ®ä¼šå®šæœŸè‡ªåŠ¨åˆ·æ–°

#### å½“æ‚¨ç¦»çº¿æ—¶ï¼š
1. åº”ç”¨ä¼šä»Žæœ¬åœ°ç¼“å­˜åŠ è½½æ•°æ®
2. æ‚¨å¯ä»¥æ­£å¸¸ä½¿ç”¨æ‰€æœ‰åŠŸèƒ½
3. æ‰€æœ‰æ›´æ”¹ä¼šä¿å­˜åˆ°å¾…åŒæ­¥é˜Ÿåˆ—
4. å³ä¸‹è§’ä¼šæ˜¾ç¤º"ç¦»çº¿æ¨¡å¼"

#### å½“ç½‘ç»œæ¢å¤æ—¶ï¼š
1. åº”ç”¨ä¼šè‡ªåŠ¨æ£€æµ‹åˆ°ç½‘ç»œè¿žæŽ¥
2. 1ç§’åŽè‡ªåŠ¨å¼€å§‹åŒæ­¥
3. å³ä¸‹è§’æ˜¾ç¤ºåŒæ­¥è¿›åº¦
4. åŒæ­¥å®ŒæˆåŽæ•°æ®ä¼šè‡ªåŠ¨åˆ·æ–°

### ä½¿ç”¨æŒ‡å—

#### æŸ¥çœ‹åŒæ­¥çŠ¶æ€
- æŸ¥çœ‹å³ä¸‹è§’çš„çŠ¶æ€æŒ‡ç¤ºå™¨
- **çº¢ç‚¹** = ç¦»çº¿æ¨¡å¼
- **è“è‰²å¸¦æ•°å­—** = æœ‰å¾…åŒæ­¥çš„æ›´æ”¹
- **ç»¿è‰²è½¬åœˆ** = æ­£åœ¨åŒæ­¥

#### æ‰‹åŠ¨åŒæ­¥
å¦‚æžœè‡ªåŠ¨åŒæ­¥æ²¡æœ‰å¯åŠ¨ï¼š
1. ç‚¹å‡»å³ä¸‹è§’çš„"ç«‹å³åŒæ­¥"æŒ‰é’®
2. ç­‰å¾…åŒæ­¥å®Œæˆ
3. æŸ¥çœ‹é€šçŸ¥äº†è§£åŒæ­¥ç»“æžœ

#### æ³¨æ„äº‹é¡¹
1. å…³é—­æµè§ˆå™¨å‰è¯·ç¡®ä¿æ‰€æœ‰æ›´æ”¹å·²åŒæ­¥
2. å¦‚æžœå¤šä¸ªè®¾å¤‡åŒæ—¶ç¦»çº¿ç¼–è¾‘ï¼Œæœ€åŽåŒæ­¥çš„æ•°æ®ä¼šè¦†ç›–ä¹‹å‰çš„
3. ç¼“å­˜ä¼šåœ¨æµè§ˆå™¨æ ‡ç­¾é¡µå…³é—­åŽæ¸…é™¤
4. æ¯æ¬¡æ‰“å¼€åº”ç”¨æ—¶éƒ½ä¼šè‡ªåŠ¨åˆ·æ–°ç¼“å­˜

### å¸¸è§é—®é¢˜

**Q: ç¦»çº¿æ—¶èƒ½åšä»€ä¹ˆï¼Ÿ**
A: å‡ ä¹Žæ‰€æœ‰åŠŸèƒ½éƒ½å¯ä»¥ä½¿ç”¨ï¼ŒåŒ…æ‹¬æŸ¥çœ‹ã€æ·»åŠ ã€ç¼–è¾‘ã€åˆ é™¤æ•°æ®ã€‚

**Q: æ•°æ®ä¼šä¸¢å¤±å—ï¼Ÿ**
A: ä¸ä¼šã€‚æ‰€æœ‰æ“ä½œéƒ½ä¼šä¿å­˜åˆ°é˜Ÿåˆ—ï¼Œç½‘ç»œæ¢å¤åŽè‡ªåŠ¨åŒæ­¥ã€‚

**Q: åŒæ­¥å¤±è´¥æ€Žä¹ˆåŠžï¼Ÿ**
A: åº”ç”¨ä¼šè‡ªåŠ¨é‡è¯•3æ¬¡ã€‚å¦‚æžœè¿˜æ˜¯å¤±è´¥ï¼Œè¯·æ£€æŸ¥ç½‘ç»œè¿žæŽ¥åŽæ‰‹åŠ¨ç‚¹å‡»"ç«‹å³åŒæ­¥"ã€‚

**Q: ç¼“å­˜å ç”¨å¤šå°‘ç©ºé—´ï¼Ÿ**
A: é€šå¸¸åœ¨1-5MBä¹‹é—´ï¼Œæµè§ˆå™¨æœ‰è¶³å¤Ÿç©ºé—´ã€‚

**Q: ç¼“å­˜ä¼šè¿‡æœŸå—ï¼Ÿ**
A: ç¼“å­˜åœ¨æµè§ˆå™¨æ ‡ç­¾é¡µå…³é—­åŽä¼šæ¸…é™¤ï¼Œè¶…è¿‡1å°æ—¶çš„æ—§ç¼“å­˜ä¹Ÿä¼šè‡ªåŠ¨æ¸…ç†ã€‚

---

## English Guide

### Feature Overview

Full offline support is now available! Even without internet, you can:
- âœ… View all data (expenses, categories, budgets, etc.)
- âœ… Add, edit, delete expenses
- âœ… Manage categories and budgets
- âœ… All changes are automatically queued
- âœ… Auto-sync when connection is restored

### How It Works

#### When You're Online:
1. App automatically downloads all data to local cache
2. Your operations are saved to cloud immediately
3. Data refreshes periodically

#### When You're Offline:
1. App loads data from local cache
2. You can use all features normally
3. All changes are saved to a sync queue
4. "Offline Mode" indicator appears in bottom-right

#### When Connection is Restored:
1. App automatically detects network connection
2. Auto-sync starts after 1 second
3. Sync progress shown in bottom-right
4. Data automatically refreshes after sync

### User Guide

#### Check Sync Status
- Look at the indicator in bottom-right corner
- **Red dot** = Offline Mode
- **Blue with number** = Pending changes to sync
- **Green spinning** = Syncing in progress

#### Manual Sync
If auto-sync doesn't start:
1. Click "Sync Now" button in bottom-right
2. Wait for sync to complete
3. Check notifications for results

#### Important Notes
1. Ensure all changes are synced before closing browser
2. If multiple devices edit offline, last sync wins
3. Cache clears when browser tab is closed
4. Cache automatically refreshes on each app load

### FAQ

**Q: What can I do offline?**
A: Almost everything - view, add, edit, delete data.

**Q: Will I lose data?**
A: No. All operations are queued and synced when online.

**Q: What if sync fails?**
A: App retries 3 times automatically. If still failing, check network and click "Sync Now" manually.

**Q: How much space does cache use?**
A: Usually 1-5MB, well within browser limits.

**Q: Does cache expire?**
A: Cache clears when browser tab closes. Old cache (>1 hour) is auto-cleaned.

---

## Technical Details

### Storage
- **Session Storage**: Stores cached data (cleared on tab close)
- **Local Storage**: Stores sync queue (persists across sessions)

### Entities Cached
- Expenses
- Categories
- Budgets
- Recurring Expenses
- Incomes
- Cards
- Banks
- E-wallets
- Repayments
- Feature Settings
- User Settings

### Sync Mechanism
1. Operations queued in localStorage
2. Automatic retry up to 3 times
3. Progressive sync with progress indicator
4. Background cache refresh after sync

### Performance
- Cache read: < 1ms
- Cache write: < 5ms
- Sync speed: ~10-20 operations/second

---

**Enjoy seamless offline editing!** ðŸŽ‰
