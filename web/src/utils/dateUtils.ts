/**
 * Date utility functions
 * Handles date operations with proper timezone support
 */

/**
 * Get today's date in local timezone formatted as YYYY-MM-DD
 * This is safer than new Date().toISOString().split('T')[0] which uses UTC
 */
export const getTodayLocal = (): string => {
  const now = new Date();
  const year = now.getFullYear();
  const month = String(now.getMonth() + 1).padStart(2, '0');
  const day = String(now.getDate()).padStart(2, '0');
  return `${year}-${month}-${day}`;
};

/**
 * Get current time in local timezone formatted as HH:MM
 */
export const getCurrentTimeLocal = (): string => {
  const now = new Date();
  const hours = String(now.getHours()).padStart(2, '0');
  const minutes = String(now.getMinutes()).padStart(2, '0');
  return `${hours}:${minutes}`;
};

/**
 * Format a date string or Date object to YYYY-MM-DD in local timezone
 */
export const formatDateLocal = (date: Date | string): string => {
  const d = typeof date === 'string' ? new Date(date) : date;
  const year = d.getFullYear();
  const month = String(d.getMonth() + 1).padStart(2, '0');
  const day = String(d.getDate()).padStart(2, '0');
  return `${year}-${month}-${day}`;
};
