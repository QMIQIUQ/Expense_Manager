# Income & Repayment Guide

收入追踪与还款系统完整指南。

---

## 目录

1. [收入追踪](#1-收入追踪)
2. [还款系统](#2-还款系统)
3. [使用场景](#3-使用场景)
4. [常见问题](#4-常见问题)

---

## 1. 收入追踪

### 功能

- ✅ 记录各种收入来源
- ✅ 按分类组织
- ✅ 内联编辑
- ✅ 查看收入趋势

### 收入字段

| 字段 | 类型 | 必填 | 说明 |
|------|------|------|------|
| 描述 | 文字 | ✅ | 收入说明 |
| 金额 | 数字 | ✅ | 收入金额 |
| 日期 | 日期 | ✅ | 收入日期 |
| 分类 | 选择 | ❌ | 收入分类 |
| 备注 | 文字 | ❌ | 额外说明 |

### 收入分类

| 分类 | 说明 |
|------|------|
| 薪资 | 工资收入 |
| 奖金 | 年终奖、绩效奖 |
| 投资 | 投资收益 |
| 副业 | 兼职收入 |
| 还款 | 他人还款 |
| 其他 | 其他收入 |

---

## 2. 还款系统

### 什么是还款追踪？

当你替他人垫付费用后，需要追踪对方的还款情况。

### 功能

- ✅ 标记支出为「待还款」
- ✅ 设置预期还款人数/金额
- ✅ 记录部分还款
- ✅ 追踪还款进度
- ✅ 超额还款自动转收入

### 创建待还款支出

1. 添加支出时勾选「追踪还款」
2. 输入预期还款金额
3. （可选）添加还款人信息
4. 保存支出

### 记录还款

1. 在支出列表找到待还款项目
2. 点击 💰 还款图标
3. 输入还款金额
4. 选择还款日期
5. 保存

### 还款状态

| 状态 | 说明 |
|------|------|
| 🔴 待还款 | 尚未收到任何还款 |
| 🟡 部分还款 | 已收到部分还款 |
| 🟢 已完成 | 全额还款完成 |

---

## 3. 使用场景

### 场景 1：团体聚餐分账

**情境**: 你先付了 $1000 的聚餐费，4 人均分

**操作**:
1. 记录支出 $1000
2. 勾选「追踪还款」
3. 预期还款：$750（其他 3 人的份额）
4. 朋友 A 还 $250 → 添加还款
5. 朋友 B 还 $250 → 添加还款
6. 朋友 C 还 $250 → 添加还款
7. 状态变为「已完成」

### 场景 2：代购商品

**情境**: 帮同事代购 $500 商品

**操作**:
1. 记录支出 $500
2. 勾选「追踪还款」
3. 预期还款：$500
4. 收到还款后记录
5. 状态变为「已完成」

### 场景 3：分期还款

**情境**: 借出 $1000 给朋友，分 4 期还

**操作**:
1. 记录支出 $1000（或创建独立借款记录）
2. 勾选「追踪还款」
3. 预期还款：$1000
4. 每期收到 $250 时添加还款
5. 4 期后状态变为「已完成」

### 场景 4：超额还款

**情境**: 朋友多还了 $50

**操作**:
1. 原支出 $200，预期还款 $200
2. 朋友实际还 $250
3. 系统自动：
   - 还款 $200 标记为完成
   - 额外 $50 创建为收入记录

---

## 4. 常见问题

### Q: 如何查看所有待还款项目？

**A**: 两种方式：
1. Dashboard → 待还款 Widget
2. Expenses → 筛选「待还款」

### Q: 可以修改还款记录吗？

**A**: 可以。点击还款记录旁的编辑按钮。

### Q: 还款记录会影响收支统计吗？

**A**: 还款记录会计入收入统计。超额还款会自动创建收入记录。

### Q: 可以删除还款追踪吗？

**A**: 可以。编辑支出，取消「追踪还款」选项。

### Q: 支持多币种吗？

**A**: 目前使用单一币种。如需多币种，建议在备注中注明原始币种。

---

## 最佳实践

### 及时记录

- 垫付后立即记录
- 收到还款立即更新
- 定期检查待还款清单

### 清晰备注

- 在备注中写明还款人
- 记录约定的还款日期
- 标注分期还款计划

### 定期对账

- 每周检查待还款项目
- 主动提醒未还款
- 必要时更新预期金额

---

*整合自: INCOME_FEATURE_GUIDE.md, REPAYMENT_ARCHITECTURE.md, REPAYMENT_FEATURE_GUIDE.md, REPAYMENT_QUICK_REFERENCE.md, IMPLEMENTATION_SUMMARY_REPAYMENT.md, INCOME_UPDATE_FIX.md, INLINE_REPAYMENT_UPDATE.md, MIGRATION_TO_NEW_REPAYMENT_SYSTEM.md*
