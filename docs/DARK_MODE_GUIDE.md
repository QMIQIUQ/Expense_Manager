# Dark Mode Guide

深色模式完整指南，包含颜色系统、实现细节和测试方法。

---

## 目录

1. [颜色层级系统](#1-颜色层级系统)
2. [紫色强调色系统](#2-紫色强调色系统)
3. [文字颜色系统](#3-文字颜色系统)
4. [状态颜色](#4-状态颜色)
5. [阴影与发光效果](#5-阴影与发光效果)
6. [CSS 变量参考](#6-css-变量参考)
7. [实现规范](#7-实现规范)
8. [测试检查清单](#8-测试检查清单)

---

## 1. 颜色层级系统

### Level 0: 主背景

| 模式 | 颜色 | 用途 |
|------|------|------|
| 亮色 | `#ffffff` | 应用主背景 |
| 暗色 | `#0a0a0f` | 带紫色调的近黑色 |

### Level 1: 卡片与主容器

| 模式 | 颜色 | 用途 |
|------|------|------|
| 亮色 | `#ffffff` | 卡片、模态框 |
| 暗色 | `#1a1625` | 带紫色调的深色 |

**对比度**: 暗色模式文字 (#f2f2f7) 在卡片 (#1a1625) 上: **14.2:1** (WCAG AAA ✅)

### Level 2: 嵌套容器

| 模式 | 颜色 | 用途 |
|------|------|------|
| 亮色 | `#f5f5f5` | 输入框、嵌套卡片 |
| 暗色 | `#252338` | 带紫色的中深色 |

### Level 3: 交互元素

| 模式 | 颜色 | 用途 |
|------|------|------|
| 亮色 | `#f0f0f0` | 按钮、标签 |
| 暗色 | `#3a3654` | 紫灰色 |

### Level 4: 边框

| 模式 | 颜色 |
|------|------|
| 亮色 | `#e5e7eb` |
| 暗色 | `#48484a` |

---

## 2. 紫色强调色系统

### 主紫色

| 变量 | 亮色 | 暗色 | 用途 |
|------|------|------|------|
| `--accent-primary` | #7c3aed | #a78bfa | 主按钮、激活状态 |
| `--accent-secondary` | #8b5cf6 | #c4b5fd | 次要强调 |
| `--accent-hover` | #6d28d9 | #8b5cf6 | 悬停状态 |
| `--accent-light` | #ede9fe | #3a3654 | 轻背景 |

### 紫色渐变

**激活标签渐变**:
```css
linear-gradient(135deg, #7c3aed 0%, #a78bfa 100%)
```

### 发光效果

```css
/* 轻微发光 */
--purple-glow: 0 0 12px rgba(167, 139, 250, 0.3);

/* 强烈发光 */
--purple-glow-strong: 0 0 20px rgba(167, 139, 250, 0.5);
```

---

## 3. 文字颜色系统

### 主文字

| 模式 | 颜色 | 对比度 |
|------|------|--------|
| 亮色 | #1f2937 | 16.1:1 (AAA) |
| 暗色 | #f2f2f7 | 14.5:1 (AAA) |

**字重**: 亮色 500-600, 暗色 600

### 次要文字

| 模式 | 颜色 | 对比度 |
|------|------|--------|
| 亮色 | #6b7280 | 5.3:1 (AA) |
| 暗色 | #98989d | 6.1:1 (AA) |

### 第三级文字

| 模式 | 颜色 | 对比度 |
|------|------|--------|
| 亮色 | #9ca3af | 3.2:1 (AA Large) |
| 暗色 | #8e8e93 | 4.2:1 (AA) |

---

## 4. 状态颜色

### 成功

| 项目 | 亮色 | 暗色 |
|------|------|------|
| 背景 | #ecfdf5 | #1a3d2c |
| 文字 | (默认) | #86efac |

### 警告

| 项目 | 亮色 | 暗色 |
|------|------|------|
| 背景 | #fef3c7 | #4d3a1a |
| 文字 | (默认) | #fcd34d |

### 错误

| 项目 | 亮色 | 暗色 |
|------|------|------|
| 背景 | #fef2f2 | #4d1a1a |
| 文字 | (默认) | #fca5a5 |

### 信息

| 项目 | 亮色 | 暗色 |
|------|------|------|
| 背景 | #eff6ff | #1a2d4d |
| 文字 | (默认) | #93c5fd |

---

## 5. 阴影与发光效果

### 亮色模式阴影

```css
--shadow-sm: 0 2px 4px rgba(0, 0, 0, 0.1);
--shadow-md: 0 4px 8px rgba(0, 0, 0, 0.15);
--shadow-lg: 0 8px 16px rgba(0, 0, 0, 0.2);
```

### 暗色模式阴影

```css
--shadow-sm: 0 2px 8px rgba(0, 0, 0, 0.5);
--shadow-md: 0 4px 12px rgba(0, 0, 0, 0.7);
--shadow-lg: 0 8px 32px rgba(0, 0, 0, 0.9);
```

### 紫色发光

```css
/* 用于悬停、焦点、激活状态 */
--purple-glow: 0 0 12px rgba(167, 139, 250, 0.3);
--purple-glow-strong: 0 0 20px rgba(167, 139, 250, 0.5);
```

---

## 6. CSS 变量参考

### 快速参考表

| 变量 | 亮色值 | 暗色值 |
|------|--------|--------|
| `--bg-primary` | #ffffff | #0a0a0f |
| `--bg-secondary` | #f5f5f5 | #18181b |
| `--card-bg` | #ffffff | #1a1625 |
| `--text-primary` | #1f2937 | #f2f2f7 |
| `--text-secondary` | #6b7280 | #98989d |
| `--text-tertiary` | #9ca3af | #8e8e93 |
| `--border-color` | #e5e7eb | #48484a |
| `--accent-primary` | #7c3aed | #a78bfa |
| `--accent-secondary` | #8b5cf6 | #c4b5fd |

---

## 7. 实现规范

### ✅ 要做

1. **使用 CSS 变量** - 所有颜色必须使用变量
2. **使用 `filter: brightness()`** - 悬停效果
   - 亮色: `brightness(0.95)`
   - 暗色: `brightness(1.1)`
3. **暗色模式字距** - 增加 `letter-spacing: 0.015em`
4. **所有过渡** - 使用 `0.3s cubic-bezier` 缓动

### ❌ 不要做

1. **硬编码颜色** - 不要使用 `#fff`, `#000`, `rgb()`, `rgba()`
2. **纯白背景** - 暗色模式禁止 `#fff`
3. **内联过渡** - 避免组件内自定义 transition

### 悬停效果示例

```css
/* 亮色模式 */
.button:hover:not(:disabled) {
  filter: brightness(0.95);
}

/* 暗色模式 */
.dark .button:hover:not(:disabled) {
  filter: brightness(1.1);
}
```

### 暗色模式特殊样式

```css
/* 菜单项悬停 */
.dark .menu-item:hover {
  background: linear-gradient(90deg, rgba(124, 58, 237, 0.15), rgba(167, 139, 250, 0.2));
  border-left: 3px solid var(--accent-primary);
}

/* 激活标签发光 */
.dark .tab.active {
  box-shadow: 0 0 20px rgba(167, 139, 250, 0.5);
}
```

---

## 8. 测试检查清单

### 视觉测试

- [ ] 两种模式下所有文字可读
- [ ] 暗色模式无纯白背景
- [ ] 紫色强调可见但不过度
- [ ] 阴影提供足够深度
- [ ] 边框清晰分隔元素

### 对比度测试

- [ ] 使用 WebAIM Contrast Checker
- [ ] 主文字 ≥ 4.5:1
- [ ] 次要文字 ≥ 4.5:1
- [ ] 按钮文字对比度
- [ ] 链接对比度

### 交互测试

- [ ] 悬停状态平滑过渡
- [ ] 激活状态清晰可见
- [ ] 焦点指示器明显
- [ ] 过渡响应迅速
- [ ] 无突兀颜色变化

### WCAG 合规

| 元素 | 亮色 | 暗色 | 级别 |
|------|------|------|------|
| 主文字 | 16.1:1 | 14.5:1 | AAA ✅ |
| 次要文字 | 5.3:1 | 6.1:1 | AA ✅ |
| 第三级文字 | 3.2:1 | 4.2:1 | AA ✅ |
| 按钮文字 | 8.5:1 | 9.2:1 | AAA ✅ |
| 链接文字 | 7.1:1 | 8.3:1 | AAA ✅ |

---

## 设计原则

### 1. 视觉层级
- UI 层级（0-4）之间有清晰区分
- 一致的间距和内边距
- 适当的阴影以感知深度

### 2. 可读性
- 高对比度文字（主文字 WCAG AAA）
- 足够的字体大小（最小 14px）
- 最佳行高（1.5-1.6）
- 暗色模式适当增加字距

### 3. 紫色强调整合
- 交互元素一致使用紫色
- 重要操作使用渐变效果
- 焦点和悬停使用发光效果
- 平衡应用，不过度

### 4. 平滑过渡
- 所有颜色变化使用 0.3s 缓动
- Transform 使用 0.2s
- 悬停时微抬效果 `translateY(-1px)`

---

*整合自: DARK_MODE_COLOR_PALETTE.md, DARK_MODE_COMPLETE_GUIDE.md, DARK_MODE_FIXES_COMPLETE.md, DARK_MODE_NOTIFICATION_FIX.md, DARK_MODE_UI_IMPROVEMENTS_SUMMARY.md, DARK_MODE_V2_FINAL_SUMMARY.md, TESTING_DARK_MODE_V2.md*
